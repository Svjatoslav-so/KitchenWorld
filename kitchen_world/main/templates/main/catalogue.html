{% extends "main/base_generic.html" %}

{% load static %}

{% block css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{% static 'main/css/catalogue_style.css' %}">
<!--    <link rel="stylesheet" href="main/css/catalogue_style.css">-->
{% endblock %}

{% block title %}<title>Kitchen World Соцсеть для кулинаров</title>{% endblock %}

{% block extends_header %}
<!--== Start Header ==-->
<header class="header" id="header">

<nav class="Nav" id="nav">
    <div class="container">
        <div class="nav__wrapper">
            <h1>Поиск</h1>
            <form class="Search" action="#" method="get">
                <input class="input" type="text" name="search-input" placeholder="Найти" id="search-input">
                <button class="search-btn" type="submit"></button>
            </form>
        </div>

    </div>
</nav>


</header>
<!--== End Header ==-->
{% endblock %}

<body>

{% block main_content %}
    <section class="section recipes">
        <div class="recipes-container ">
            <div class="recipes-wrapper">
                <div class="menu">
                    <ul class="menu">
                        <form method="get">
                            <button type="submit" class="btn submit active">Сортировать</button>
                            <p>
                                ____________________________


                            </p>
                            {% for cat in category %}
                            <li class="menu__item">
                                <input name="{{cat.name}}" type="checkbox" value="title">{{cat.name}}
                            </li>
                            {% endfor %}
                        </form>
                    </ul>
                </div>
                <div class="content">
                    <div class="content__info">
                        <h2 class="section-title">
                            Каталог
                        </h2>
                        <div class="order">
                            <p class="order-title">Сортировать по:</p>
                            <select name="order" id="order-list" class="order__list">
                                <option class="order__item" value="date">Дате</option>
                                <option class="order__item" value="stars">Популярности</option>
                                <option name="order__item" value="alphabet" />По алфавиту</option>
                            </select>
                        </div>
                    </div>
                    <div class="cards-wrapper">
                        <!-- Insert cards -->
<!--                        recipe_FILTER = Recipe.objects.all().order_by('date_of_creation')-->
                        {% for recipe, r_photo in recipes %}
                        <div class="card" data-recipeId="{{ recipe.id }}">
                            <div class="card__header">
                                <a href="#" class="card__recipe-autor">
                                    <img src="{{ recipe.user.author.photo.url }}" alt="" class="card__recipe-autor-avatar">
                                    <div class="card__recipe-inner">
                                        <h3 class="card__recipe-autor-named">{{ recipe.user.username|title }}</h3>
<!--                                        <span class="card__recipe-time">20.10.2022 в 15:58</span>-->
                                        <span class="card__recipe-time">{{ recipe.date_of_creation }}</span>
                                    </div>
                                </a>
                                <button type="button" class="card__dots"></button>
                            </div>
                            <a href="{{ recipe.get_absolute_url }}" class="card-link">
                                <img src="{{ r_photo.photo.url }}" alt="" class="card__img">
                            </a>

                            <div class="card__info">
                                <div class="card__interaction-wrapper">
                                    <div class="card__interaction">
                                        <button class="card__stars"></button>
                                        {{ recipe.num_of_stars }}
                                    </div>
                                    <div class="card__interaction">
                                        <button class="card__comments"></button>
                                        {{ recipe.num_of_comments }}
                                    </div>
                                    <div class="card__interaction">
                                        <button class="card__bookmarks"></button>
                                        {{ recipe.num_of_bookmarks }}
                                    </div>
                                </div>
                                <div class="card__statistics-wrapper">
                                    <div class="card__statistic">
                                        <button class="card__time"></button>
                                        {{ recipe.cooking_time }}
                                    </div>
                                    <div class="card__statistic">
                                        <button class="card__calories"></button>
                                        {{ recipe.calories }}
                                    </div>
                                </div>
                            </div>
                            <h3 class="card__title"><a href="{{ recipe.get_absolute_url }}" class="card-link">{{ recipe.title }}</a> </h3>
                            <p class="card__description">{{ recipe.description|truncatechars:100 }}<span
                                    class="card__more">ещё</span></p>
                            <div class="card__categories-wrapper">
                                {% for c in recipe.categories.all %}
                                <a class="category">#{{ c.name|lower }}</a>
                                {% endfor %}
                            </div>

                        </div>
                        {% endfor %}

                    </div>
                </div>
            </div>
        </div>


    </section>

{% endblock %}

</body>